<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
   - Copyright (c) 2017. Innovative Routines International (IRI), Inc.   -->

<html lang="en-US">
<head>
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">

  <title>Subsetting</title>
  <style type="text/css">

  h1 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:12pt;text-align:left; font-weight:bold;}
  h2 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:10pt;text-align:left; font-weight:bold;}
  h3 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:10pt;text-align:left; font-weight:bold;font-style:oblique;}

  body {font-family:Arial,Helvetica,sans-serif; color:#000000;font-size:9pt;text-align:left; font-weight:normal;} 

  </style>
</head>

<body>
  <h1>Subsetting Demo</h1>

  <p>This demo shows how to create a smaller, referentially-correct copy of a larger database.

  <p>This demo requires and uses the following resources:

  <ul>
    <li>The DTP connection profile Oracle

    <li>The ODBC DSN Oracle
  </ul>

  <p>After Oracle is connected via ODBC and JDBC (in DTP), execute 
  <em>truncateTables.sql</em> in the <strong>restore</strong> folder.

  <h2>Steps</h2>

  <ol>
  
    <li style="margin-bottom: 10px;">Click the <strong>Subsetting</strong>
    project in the <strong>Project Explorer</strong>.
    
    <li style="margin-bottom: 10px;">Open the Oracle connection in
    the Data Source Explorer.

    <li style="margin-bottom: 10px;">Navigate to the
    <strong>XE</strong> -&gt; <strong>Schemas</strong> -&gt;
    <strong>SCOTT</strong> -&gt; <strong>Tables</strong>.

    <li style="margin-bottom: 10px;">Right click the source table 
    <strong>SALE_DIM</strong> and select <strong>IRI</strong> -&gt;
    <strong> New Subset Job</strong>.
    
    <li style="margin-bottom: 10px;">On the <strong>Define Destination</strong>
    page, select the <strong>Loader ODBC</strong>. To output to a tab delimited file,
    leave the Loader blank. Click <strong>Next</strong>.
    
    <li style="margin-bottom: 10px;">The <strong>SALE_DIM</strong> table is already selected
    on the <strong>Data Extraction Stage</strong> page so click <strong>Next</strong>.
    
    <li style="margin-bottom: 10px;">The <strong>Sort</strong> page is where you specify 
    the sort order of the subset. For example, to get a subset of the highest 
    quantity sold levels, you would sort on the quantity sold field in descending order
    (as in this example). If you want the rows selected randomly, however, leave the 
    Key Fields list blank. Double click the <strong>QTY_SOLD</strong> field. Click the
    key on the right and then 
    <strong>Edit Key</strong> and select <strong>Descending</strong> next to 
    <strong>Direction</strong>. Click <strong>OK</strong>. Click <strong>Next</strong>.
    
    <li style="margin-bottom: 10px;">
    The <strong>Options</strong> page is where you specify the size of the subset and 
    any filters. The size and filter is applied to the source table. Enter 100.
    
    <li style="margin-bottom: 10px;">
    The <strong>Data Loading</strong> page will display if you have selected a loader. It 
    has two functions. The first is to name the output targets for the subset. 
    The second allows you to view the relations of your source table.
    
    <li style="margin-bottom: 10px;">Specify the Oracle <strong>Connection Profile</strong> and
    the SCOTT <strong>Schema Name</strong>. The <strong>Output mode</strong> remains CREATE
    because the tables are truncated if they already exist.
    
    <li style="margin-bottom: 10px;">Under <strong>Naming options</strong> define the details 
    of the target tables. The tables are going to be loaded back into the same 
    schema so we need to change the table names so the source table is not overwritten. 
    We want to prefix the table names so select that option. In textbox, enter <em>SUB_</em> 
    and click <strong>Set</strong>.
    
    <li style="margin-bottom: 10px;">In the lower section of the page, the new names of the tables
    have been prepended with the prefix. Selecting a different table in <strong>Original</strong>
    will display the new table name. Click <strong>Next</strong>.
    
    <li style="margin-bottom: 10px;">
	On the <strong>Field Modifications Rules</strong> page, you can enter rules to apply to the
	tables. Care must be taken not to apply a rule to a foreign key which would impact 
	the results. 
    
    <li style="margin-bottom: 10px;">On the <strong>Summary</strong> page, you can review 
    the details of your job. Click <strong>Finish</strong>.

  </ol>

  <h2>Cleanup</h2>

  <ol>
    <li style="margin-bottom: 10px;">Delete the <em>new_subset</em> folder.

    <li style="margin-bottom: 10px;">Execute
    <em>truncateTables.sql</em> in the <strong>restore</strong> folder.
  </ol>
</body>
</html>