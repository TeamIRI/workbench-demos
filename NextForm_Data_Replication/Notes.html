<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
   - Copyright (c) 2016 Innovative Routines International (IRI), Inc.   -->

<html lang="en-US">
<head>
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">

  <title>Data Replication</title>
  <style type="text/css">

    h1 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:12pt;text-align:left; font-weight:bold;}
  h2 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:10pt;text-align:left; font-weight:bold;}
  h3 {font-family:Arial,Helvetica,sans-serif; color:#0F2B5B;font-size:10pt;text-align:left; font-weight:bold;font-style:oblique;}

   body {font-family:Arial,Helvetica,sans-serif; color:#000000;font-size:9pt;text-align:left; font-weight:normal;} 

  </style>
</head>

<body>
  <h1>Data Replication</h1>

  <p>This demonstrates the use of the NextForm New Reformat Job
  wizard for data replication. The source is an Oracle database
  table and the output is a MySQL database table and a flat
  file.</p>

  <ol>
    <li style="margin-bottom: 10px;">Open the "New Reformat Job"
    wizard from the NextForm toolbar menu.</li>

    <li style="margin-bottom: 10px;">Select the
    <strong>Nextform_Data_Replication</strong> project folder and
    name the job file <code>datareplication</code>. Select
    <strong>Create Script</strong>, and then click
    <strong>Next</strong> to go to the Data Sources page</li>

    <li style="margin-bottom: 10px;">To add the data source, click
    <strong>Add Data Source</strong> to open the Data Source
    dialog.</li>

    <li style="margin-bottom: 10px;">Select <strong>ODBC</strong>
    and click <strong>Browse</strong>. In the <strong>Data source
    name(DSN)</strong> field, select <strong>Oracle</strong>. In
    the <strong>Table name</strong> field, select
    <strong>CUSTOMERS_REP</strong>, and then click
    <strong>OK</strong>, and click <strong>OK</strong> again on the
    Data Source dialog.</li>

    <li style="margin-bottom: 10px;">Click <strong>Add Existing
    Metadata</strong> on the right. Select <em>cust.ddf</em> (which
    was created earlier) and click <strong>OK</strong>.</li>

    <li style="margin-bottom: 10px;">When the save specification
    message opens, select <strong>Yes</strong> to copy the fields
    in the ddf to the job section. Click <strong>Next</strong> on
    the Data Sources page to open Data Targets.</li>

    <li style="margin-bottom: 10px;">To add the database table
    target, click <strong>Add Data Target</strong>.</li>

    <li style="margin-bottom: 10px;">Select <strong>ODBC</strong>
    and click <strong>Browse</strong>. In the <strong>Data source
    name(DSN)</strong> field, select <strong>MySQL</strong>. In the
    <strong>Table name</strong> field, select
    <strong>customers_out</strong>, and then click
    <strong>OK</strong>, and click <strong>OK</strong> again on the
    Data Target dialog.</li>

    <li style="margin-bottom: 10px;">Click <strong>Add Existing
    Metadata</strong> on the right. Select <em>cust.ddf</em> and
    click <strong>OK</strong>.</li>

    <li style="margin-bottom: 10px;">To limit the number of records
    in the target, click <strong>Edit Target Options</strong> to
    open the Target Options field editor. In the
    <strong>Outcollect</strong> field, enter 100. Click
    <strong>OK</strong>.</li>

    <li style="margin-bottom: 10px;">To add the flat file target,
    click <strong>Add Data Target</strong> again. In the
    <strong>File</strong> field, enter <em>personout.csv</em> and
    click <strong>OK</strong>.</li>

    <li style="margin-bottom: 10px;">To limit the number of records
    in the target file and change the format, click <strong>Edit
    Target Options</strong>. In the <strong>Format</strong> field,
    change RECORD to <strong>CSV</strong>. Enter 50 in the
    <strong>Outcollect</strong> field. Click
    <strong>OK</strong>.</li>

    <li style="margin-bottom: 10px;">Click <strong>Target Field
    Layout</strong>. In the Targets section, select the tab for
    personout.csv.</li>

    <li style="margin-bottom: 10px;">Select the SSN field,
    right-click and select <strong>Apply Rule</strong>. Select
    <strong>Create Rule</strong>, and then select <strong>String
    Manipulation Functions</strong>.</li>

    <li style="margin-bottom: 10px;">On the String Manipulation
    Functions page, select <strong>sub_string</strong>. In the
    <strong>Offset</strong> field, enter 6 (the number of
    characters from the left of the field), in the
    <strong>Length</strong> field, enter 4 (the length of the
    subtring). Click <strong>Finish</strong>.</li>
	
	<li style="margin-bottom: 10px;">
	Drag <strong>LASTNAME</strong> to the bottom of the field list. 
	Drag <strong>FIRSTNAME</strong> to the bottom of the field list.
	Click <strong>OK</strong>. You will be prompted to reposition the 
	fields. Click <strong>Yes</strong>.

    <li style="margin-bottom: 10px;">Now add a record filter to
    limit the data to include only those records from CA. Click
    <strong>Record Filter</strong>. Select <strong>Include</strong>
    for the Filter Action, and select <strong>New
    Condition</strong> for the type. Open the Expression Builder by
    clicking the <strong>Function</strong> icon.</li>

    <li style="margin-bottom: 10px;">In the Expression Builder,
    select the category <strong>Relational Operators</strong> and
    the item <strong>EQ</strong>. In the
    <strong>Expression</strong> field at the top, enter <code>STATE EQ
    &ldquo;CA&rdquo;</code> using the tools on the toolbar, and click
    <strong>Finish</strong>.</li>

    <li style="margin-bottom: 10px;">Back on the Data Targets page,
    re-position the last and first name fields after the zip field.
    Select <strong>LASTNAME</strong> and click
    <strong>Down</strong> until the field is at the bottom of the
    list, then select <strong>FIRSTNAME</strong> and do the
    same.</li>

    <li style="margin-bottom: 10px;">Click <strong>Finish</strong>
    to complete the script.</li>

    <li style="margin-bottom: 10px;">Right-click in the script and
    select <strong>Run As -&gt; IRI Job</strong> to run the
    script.</li>
  </ol>
</body>
</html>